---
layout: default
---

<div class="row">
  <div class="col-md-8 mb-5">
    <h2>¿Quiénes somos?</h2>
    <hr />
    <p>
      En <strong>Desbroces Pontevedra</strong> nos especializamos en la limpieza y mantenimiento de fincas, jardines y montes en toda la provincia. 
      Ofrecemos soluciones rápidas, eficaces y seguras tanto a particulares como a empresas.
    </p>
    <p>
      Contamos con maquinaria profesional y un equipo cualificado que garantiza resultados óptimos, ya sea para preparar un terreno, conservarlo o ponerlo a la venta.
    </p>
    <a class="btn btn-primary btn-lg" href="#servicios">Ver Servicios &raquo;</a>
  </div>
  {% include sidebar.html %}
</div>
<!-- /.row -->

<div class="row" id="servicios">
  <div class="col-md-4 mb-5">
    <div class="card border-0 shadow h-100">
      <img class="card-img-top" src="assets/img/desbroce.jpg" alt="Desbroce de fincas" />
      <div class="card-body">
        <h4 class="card-title">Desbroce de fincas</h4>
        <p class="card-text">
          Eliminamos maleza, hierbas y vegetación densa para recuperar terrenos rurales o urbanos.
        </p>
      </div>
      <div class="card-footer">
        <a href="#contacto" class="btn btn-primary">Solicitar presupuesto</a>
      </div>
    </div>
  </div>

  <div class="col-md-4 mb-5">
    <div class="card border-0 shadow h-100">
      <img class="card-img-top" src="assets/img/poda.jpg" alt="Poda de árboles" />
      <div class="card-body">
        <h4 class="card-title">Poda de árboles</h4>
        <p class="card-text">
          Realizamos podas estéticas y de mantenimiento para árboles, setos y zonas verdes.
        </p>
      </div>
      <div class="card-footer">
        <a href="#contacto" class="btn btn-primary">Ver más</a>
      </div>
    </div>
  </div>

  <div class="col-md-4 mb-5">
    <div class="card border-0 shadow h-100">
      <img class="card-img-top" src="assets/img/maquinaria.jpg" alt="Maquinaria profesional" />
      <div class="card-body">
        <h4 class="card-title">Maquinaria profesional</h4>
        <p class="card-text">
          Trabajamos con desbrozadoras, tractores y herramientas modernas para ofrecer eficiencia y seguridad.
        </p>
      </div>
      <div class="card-footer">
        <a href="#contacto" class="btn btn-primary">Solicitar información</a>
      </div>
    </div>
  </div>
</div>
<!-- /.row -->

<!-- Sección de contacto -->
<div id="contacto" class="my-5 text-center">
  <h2>¿Necesitas un presupuesto?</h2>
  <p>Contáctanos para recibir una valoración gratuita y sin compromiso.</p>
  <a href="mailto:tu-email@dominio.com" class="btn btn-success btn-lg">Enviar correo</a>

  <!-- Botón para conectar MetaMask aquí -->
  <br><br>
  <button id="connectMetaMask" class="btn btn-warning btn-lg">Conectar MetaMask</button>
  <p id="metaMaskStatus" style="margin-top: 10px;"></p>

  <!-- Botón de pago (inicialmente oculto) -->
  <br><br>
  <button id="payButton" class="btn btn-success btn-lg" style="display:none;">Pagar Presupuesto</button>
  <p id="paymentStatus" style="margin-top: 10px;"></p>
</div>

<!-- Integración con Alchemy y Viem -->
<script type="module">
  import { createPublicClient, http } from "https://cdn.jsdelivr.net/npm/viem@latest/dist/viem.min.js";
  import { base } from "https://cdn.jsdelivr.net/npm/viem@latest/dist/viem/chains.js";

  const client = createPublicClient({
    chain: base,
    transport: http("https://base-mainnet.g.alchemy.com/v2/hpm3wjQJZ31MCYtCUfJen"),
  });

  async function obtenerBloque() {
    try {
      const block = await client.getBlock({
        blockNumber: 123456n,  // Cambia el número de bloque si necesitas otro
      });

      console.log("Bloque obtenido:", block);
    } catch (error) {
      console.error("Error al obtener el bloque:", error);
    }
  }

  obtenerBloque();
</script>

<!-- Conexión a MetaMask y pago -->
<script>
  document.getElementById('connectMetaMask').addEventListener('click', async () => {
    if (typeof window.ethereum !== 'undefined') {
      try {
        // Solicitar cuentas al usuario
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        document.getElementById('metaMaskStatus').innerHTML = `Conectado con la cuenta: ${accounts[0]}`;

        // Mostrar el botón de pago
        document.getElementById('payButton').style.display = 'inline-block';

      } catch (error) {
        document.getElementById('metaMaskStatus').innerHTML = 'Error al conectar MetaMask';
        console.error('Error al conectar MetaMask:', error);
      }
    } else {
      document.getElementById('metaMaskStatus').innerHTML = 'Por favor, instala MetaMask.';
    }
  });

  // Evento para el botón de pago
  document.getElementById('payButton').addEventListener('click', async () => {
    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
    const account = accounts[0];

    // Definir la cantidad a pagar (por ejemplo, 0.05 ETH)
    const amountInEther = '0.05';  // Modificar según el presupuesto

    try {
      // Realizar la transacción
      const tx = await ethereum.request({
        method: 'eth_sendTransaction',
        params: [
          {
            from: account,
            to: '0x692018bED36405fD85d9f9531A146cA3b0aE45a0',  // Dirección de recepción
            value: ethereum.utils.toHex(ethereum.utils.parseEther(amountInEther)),
          },
        ],
      });

      // Mostrar estado de pago
      document.getElementById('paymentStatus').innerHTML = `Pago exitoso. TX Hash: ${tx}`;

    } catch (error) {
      document.getElementById('paymentStatus').innerHTML = 'Error en el pago.';
      console.error('Error en el pago:', error);
    }
  });
</script>

</body>
</html>

